# {"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":35,"panels":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"1min 内的 CPU 的 running 队列上平均 task 数量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"core_num"},"properties":[{"id":"custom.drawStyle","value":"line"}]}]},"gridPos":{"h":7,"w":12,"x":0,"y":1},"id":36,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_cpu_load_1{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_cpu_total{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","hide":false,"instant":false,"legendFormat":"core_num","range":true,"refId":"B"}],"title":"runtime_cpu_load_1","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"5min 内的 CPU 的 running 队列上平均 task 数量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":1},"id":37,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_cpu_load_5{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_cpu_load_5","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"15min 内的 CPU 的 running 队列上平均 task 数量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":8},"id":38,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_cpu_load_15{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_cpu_load_15","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"最近 5min 每秒钟 GC 发生次数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":8},"id":41,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(runtime_gc_num{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_gc_num","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"CPU 使用率","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":15},"id":40,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_cpu_usage_percent{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_cpu_usage_percent","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":15},"id":43,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_goroutine_num{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_goroutine_num","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每次 GC 暂停时间(μs)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"us"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":22},"id":42,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(runtime_gc_pause_total{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / rate(runtime_gc_num{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / 1000","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"每次 GC 暂停时间(μs)","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"实时堆内存使用量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":22},"id":12,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_mem_heap_alloc{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_mem_heap_alloc","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"当前活跃分配的堆内存字节数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":29},"id":44,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_mem_alloc{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_mem_alloc","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"Go 运行时系统内存占用","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":29},"id":14,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_mem_system_alloc{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_mem_system_alloc","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"当前堆上存活的对象数量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"K"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":36},"id":13,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_mem_heap_object_num{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}/1000","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_mem_heap_object_num","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"内存使用率","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":36},"id":16,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_mem_usage_percent{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_mem_usage_percent","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"硬件内存数量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":43},"id":15,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"runtime_mem_total{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}","range":true,"refId":"A"}],"title":"runtime_mem_total","type":"timeseries"}],"title":"Runtime","type":"row"}
# {"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":1},"id":3,"panels":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"GRPC 请求数量(当前服务请求其他服务)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":2},"id":1,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(grpc_client_request{from_region=\"$native_region\", from_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{to_method}}","range":true,"refId":"A"}],"title":"grpc_client_request","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"GRPC 每秒请求数量(其他服务请求当前服务)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":2},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(grpc_server_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{to_method}}","range":true,"refId":"A"}],"title":"grpc_server_request","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"GRPC 请求数量(当前服务请求其他服务)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":9},"id":48,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"(sum by (to_method) ( rate(grpc_client_request{from_region=\"$native_region\", from_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\", is_error=\"0\"}[1m]) )) / (sum by (to_method) (rate(grpc_client_request{from_region=\"$native_region\", from_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])))","legendFormat":"{{to_method}}","range":true,"refId":"A"}],"title":"grpc_client_request 成功率","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"GRPC 请求成功率(其他服务请求当前服务)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":9},"id":47,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"(sum by (to_method) (rate(grpc_server_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\", is_error=\"0\"}[1m]))) / (sum by (to_method) (rate(grpc_server_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])))","legendFormat":"__auto","range":true,"refId":"A"}],"title":"grpc_server_request 成功率","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"GRPC 客户端延迟(当前服务请求其他服务)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":16},"id":5,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"irate(grpc_client_latency_sum{from_region=\"$native_region\", from_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / rate(grpc_client_latency_count{from_region=\"$native_region\", from_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{to_method}}","range":true,"refId":"A"}],"title":"grpc_client_latency","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"GRPC 服务端延时(其他服务请求当前服务)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":16},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(grpc_server_latency_sum{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / rate(grpc_server_latency_count{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{to_method}}","range":true,"refId":"A"}],"title":"grpc_server_latency","type":"timeseries"}],"title":"GRPC","type":"row"}
# {"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":2},"id":17,"panels":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"HTTP 请求数量","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":3},"id":18,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"sum by (pod_name) (rate(http_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]))","legendFormat":"__auto","range":true,"refId":"A"}],"title":"http_request","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"请求响应时间","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":3},"id":19,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"avg by(uri) (\n    rate(http_latency_sum{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / rate(http_latency_count{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])\n)","legendFormat":"__auto","range":true,"refId":"A"}],"title":"http_latency","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"HTTP 请求失败率","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":10},"id":46,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"(sum by (uri) (rate(http_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\",is_error=\"1\",pod_name=~\"$pod_name\"}[1m]))) / (sum by (uri) (rate(http_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\",pod_name=~\"$pod_name\"}[1m])))","legendFormat":"{{uri}}","range":true,"refId":"A"}],"title":"HTTP 请求失败率","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"HTTP 请求失败错误情况","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":10},"id":49,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"sum by (uri, err_code) (rate(http_request{to_region=\"$native_region\", to_env=~\"$native_env\", app=~\"$app\",is_error=\"1\", pod_name=~\"$pod_name\"}[1m]))","legendFormat":"{{uri}}-{{err_code}}","range":true,"refId":"A"}],"title":"HTTP 请求失败错误情况","type":"timeseries"}],"title":"HTTP","type":"row"}
# {"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":3},"id":20,"panels":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"数据库最大开放连接数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":4},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"mysql_max_open_connections{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_max_open_connections","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"当前建立的连接总数（使用中 + 空闲）","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":4},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"mysql_open_connections{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_open_connections","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"当前空闲连接数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":11},"id":21,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"mysql_idle{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_idle","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"当前正在使用的连接数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":11},"id":22,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"mysql_in_use{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_in_use","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每秒等待连接的总次数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":18},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":" rate(mysql_wait_count{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_wait_count(待优化: 最好和 mysql_wait_duration 配合用)","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"等待连接的总时间","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":18},"id":11,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(mysql_wait_duration_sum{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\"}[1m]) / rate(mysql_wait_duration_count{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\"}[1m])","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_wait_duration(待优化: 指标可能 上报的有错误)","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"因空闲连接数超限而关闭的连接","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":25},"id":23,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"mysql_max_idle_closed{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_max_idle_closed","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"因空闲时间超限而关闭的连接","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":25},"id":24,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"mysql_max_idle_time_closed{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_max_idle_time_closed","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"因生命周期超限而关闭的连接","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":32},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(mysql_max_lifetime_closed{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}} - {{name}}","range":true,"refId":"A"}],"title":"mysql_max_lifetime_closed","type":"timeseries"}],"title":"MySQL","type":"row"}
{"collapsed":true,"gridPos":{"h":1,"w":24,"x":0,"y":4},"id":25,"panels":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每秒从池中成功获取空闲连接的次数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":5},"id":26,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(redis_hits{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_hits","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每秒未能从池中获取连接，需要新建连接的次数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":5},"id":27,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(redis_misses{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_misses","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"池中总连接数（活跃 + 空闲）","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":12},"id":28,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"redis_total_conns{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_total_conns","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"当前空闲连接数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":12},"id":29,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"redis_idle_conns{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_idle_conns","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每秒等待连接超时的次数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":19},"id":30,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(redis_timeouts{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_timeouts","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每秒被移除的过期连接数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":19},"id":31,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(redis_stale_conns{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_stale_conns","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"命令执行时延(μs)","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":26},"id":32,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"irate(redis_command_latency_sum{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / rate(redis_command_latency_count{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}-{{command}}","range":true,"refId":"A"}],"title":"redis_command_latency","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"ping 服务器延时","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ms"},"overrides":[{"__systemRef":"hideSeriesFrom","matcher":{"id":"byNames","options":{"mode":"exclude","names":["native-api-gateway-prod-v2-75548b7b9f-j9phr-native_api"],"prefix":"All except:","readOnly":true}},"properties":[{"id":"custom.hideFrom","value":{"legend":false,"tooltip":true,"viz":true}}]}]},"gridPos":{"h":7,"w":12,"x":12,"y":26},"id":33,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"irate(redis_check_latency_sum{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m]) / irate(redis_check_latency_count{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}","range":true,"refId":"A"}],"title":"redis_check_latency","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"description":"每秒命令请求次数","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"cps"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":33},"id":34,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.2.1","targets":[{"datasource":{"type":"prometheus","uid":"af3yvzwa6ckcgc"},"editorMode":"code","expr":"rate(redis_command{native_region=\"$native_region\", native_env=~\"$native_env\", app=~\"$app\", pod_name=~\"$pod_name\"}[1m])","legendFormat":"{{pod_name}}-{{name}}-{{command}}","range":true,"refId":"A"}],"title":"redis_command","type":"timeseries"}],"title":"Redis","type":"row"}
